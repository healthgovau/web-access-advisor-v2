<!DOCTYPE html>
<html>
<head>
    <title>Test Page 5</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <div class="nav">
        <h2>üîç WAA Test Suite</h2>
        <ul>
            <li><a href="index.html">üè† Home</a></li>
            <li><a href="page1.html">üìù Test Page 1</a></li>
            <li><a href="page2.html">üìã Test Page 2</a></li>
            <li><a href="page3.html">üìä Test Page 3</a></li>
            <li><a href="page4.html">‚öôÔ∏è Test Page 4</a></li>
            <li><a href="page5.html" aria-current="page">üöÄ Test Page 5</a></li>
        </ul>
    </div>
    
    <main id="main-content" class="content">
        <h1>Page 5: Advanced Components & Error Handling</h1>
        
        <!-- ACCESSIBLE SECTION -->
        <section>
            <h2>‚úÖ ACCESSIBLE EXAMPLES</h2>
            
            <h3>Accessible Image Carousel</h3>
            <div class="test-note" style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 10px; margin: 10px 0;" role="region" aria-labelledby="accessible-carousel-heading">
                <h4 id="accessible-carousel-heading" style="margin: 0 0 8px 0;">‚úÖ ACCESSIBLE REFERENCE IMPLEMENTATION</h4>
                <p style="margin: 0;"><strong>Purpose:</strong> Demonstrates proper carousel with ARIA live regions and keyboard navigation</p>
                <p style="margin: 4px 0 0 0;"><strong>Testing:</strong> Compare against inaccessible carousel below - interaction optional for validation</p>
            </div>
            <div role="region" aria-labelledby="carousel-heading" class="carousel">
                <h4 id="carousel-heading">Government Office Locations</h4>
                <div role="group" aria-labelledby="slide-1-title" aria-roledescription="slide" aria-label="1 of 3">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk1haW4gT2ZmaWNlPC90ZXh0Pjwvc3ZnPg==" alt="Main government office building exterior" />
                    <h5 id="slide-1-title">Main Office</h5>
                    <p>123 Government St, City, State 12345</p>
                </div>
                <button type="button" aria-label="Previous slide" onclick="previousSlide()">‚Äπ</button>
                <button type="button" aria-label="Next slide" onclick="nextSlide()">‚Ä∫</button>
                <ol aria-label="Slide navigation">
                    <li><button type="button" aria-label="Go to slide 1" aria-current="true">1</button></li>
                    <li><button type="button" aria-label="Go to slide 2">2</button></li>
                    <li><button type="button" aria-label="Go to slide 3">3</button></li>
                </ol>
            </div>
            
            <h3>Comprehensive Form with Error Handling</h3>
            <div class="test-note" style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 10px; margin: 10px 0;" role="region" aria-labelledby="accessible-form-error-heading">
                <h4 id="accessible-form-error-heading" style="margin: 0 0 8px 0;">‚úÖ ACCESSIBLE REFERENCE IMPLEMENTATION</h4>
                <p style="margin: 0;"><strong>Purpose:</strong> Demonstrates proper form validation and error handling patterns</p>
                <p style="margin: 4px 0 0 0;"><strong>Testing:</strong> Compare against defective forms below - interaction optional for validation testing</p>
            </div>
            <form novalidate aria-describedby="form-instructions">
                <div id="form-instructions">All fields marked with * are required. Errors will be displayed at the top of the form.</div>
                
                <div role="alert" id="error-summary" style="display: none;">
                    <h4>Please correct the following errors:</h4>
                    <ul id="error-list"></ul>
                </div>
                
                <fieldset>
                    <legend>Application Information</legend>
                    
                    <label for="ssn">Social Security Number *</label>
                    <input type="text" id="ssn" name="ssn" required 
                           aria-describedby="ssn-help ssn-error" 
                           pattern="[0-9]{3}-[0-9]{2}-[0-9]{4}"
                           autocomplete="off" />
                    <div id="ssn-help">Format: XXX-XX-XXXX</div>
                    <div id="ssn-error" role="alert" style="display: none;"></div>
                    
                    <label for="income">Annual Income *</label>
                    <input type="number" id="income" name="income" required 
                           aria-describedby="income-help income-error"
                           min="0" step="1" />
                    <div id="income-help">Enter your total annual income in USD</div>
                    <div id="income-error" role="alert" style="display: none;"></div>
                    
                    <fieldset>
                        <legend>Household Size *</legend>
                        <input type="radio" id="size-1" name="household-size" value="1" required />
                        <label for="size-1">1 person</label>
                        
                        <input type="radio" id="size-2" name="household-size" value="2" required />
                        <label for="size-2">2 people</label>
                        
                        <input type="radio" id="size-3" name="household-size" value="3+" required />
                        <label for="size-3">3 or more people</label>
                        <div id="household-error" role="alert" style="display: none;"></div>
                    </fieldset>
                </fieldset>
                
                <button type="submit" onclick="validateAccessibleForm(event)">Submit Application</button>
            </form>
            
            <h3>Accessible Loading States</h3>
            <div class="test-note" style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 10px; margin: 10px 0;" role="region" aria-labelledby="accessible-loading-heading">
                <h4 id="accessible-loading-heading" style="margin: 0 0 8px 0;">‚úÖ ACCESSIBLE REFERENCE IMPLEMENTATION</h4>
                <p style="margin: 0;"><strong>Purpose:</strong> Demonstrates proper loading state communication with live regions</p>
                <p style="margin: 4px 0 0 0;"><strong>Testing:</strong> Compare against silent loading example below - interaction optional for validation</p>
            </div>
            <button type="button" onclick="simulateLoading()" id="load-btn">
                Process Application
            </button>
            <div aria-live="polite" id="loading-status"></div>
        </section>
        
        <!-- DEFECTIVE SECTION -->
        <section style="border-top: 3px solid red; margin-top: 40px; padding-top: 20px;">
            <h2>‚ùå DEFECTIVE EXAMPLES </h2>
            
            <h3>Completely Inaccessible Carousel</h3>
            <div class="test-note" style="background: #ffebee; border-left: 4px solid #f44336; padding: 10px; margin: 10px 0;">
                <strong>‚ùå NO INTERACTION:</strong> No keyboard support, no ARIA, no screen reader support.
                <br><strong>Purpose:</strong> Compare with accessible carousel above - for static analysis only
            </div>
            <div class="bad-carousel" style="position: relative; width: 300px; height: 200px; border: 1px solid #ccc;">
                <div id="slide-container" style="overflow: hidden; width: 100%; height: 100%;">
                    <div class="slide" style="display: none;">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIDE8L3RleHQ+PC9zdmc+" />
                    </div>
                    <div class="slide" style="display: block;">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIDI8L3RleHQ+PC9zdmc+" />
                    </div>
                    <div class="slide" style="display: none;">
                        <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIDM8L3RleHQ+PC9zdmc+" />
                    </div>
                </div>
                <!-- No keyboard support, no ARIA, no screen reader support -->
                <span onclick="prevSlide()" style="position: absolute; left: 10px; top: 50%; cursor: pointer; font-size: 24px;">‚Üê</span>
                <span onclick="nextSlide()" style="position: absolute; right: 10px; top: 50%; cursor: pointer; font-size: 24px;">‚Üí</span>
                <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">
                    <span onclick="goToSlide(0)" style="cursor: pointer; margin: 0 5px;">‚Ä¢</span>
                    <span onclick="goToSlide(1)" style="cursor: pointer; margin: 0 5px; color: #007cba;">‚Ä¢</span>
                    <span onclick="goToSlide(2)" style="cursor: pointer; margin: 0 5px;">‚Ä¢</span>
                </div>
            </div>
            
            <h3>Catastrophic Error Handling</h3>
            <div class="test-note" style="background: #ffebee; border-left: 4px solid #f44336; padding: 10px; margin: 10px 0;">
                <strong>‚ùå NO INTERACTION:</strong> Form has duplicate IDs and no proper error handling.
                <br><strong>Purpose:</strong> Structural validation issues for automated tools to detect
            </div>
            <form onsubmit="return disastrousValidation()" autocomplete="off">
                <!-- Multiple duplicate IDs -->
                <input type="text" id="bad-id" placeholder="Social Security Number" />
                <input type="email" id="bad-id" placeholder="Email Address" />
                <input type="number" id="bad-id" placeholder="Annual Income" />
                
                <!-- No validation, no error association -->
                <input type="radio" name="bad-size" value="1" /> 1 person
                <input type="radio" name="bad-size" value="2" /> 2 people
                <input type="radio" name="bad-size" value="3" /> 3+ people
                
                <!-- Missing form structure -->
                <select>
                    <option>Choose state</option>
                    <option value="">-- Empty value --</option>
                    <option value="CA">California</option>
                </select>
                
                <!-- Button without type -->
                <button onclick="badSubmit()">Submit Without Validation</button>
            </form>
            
            <!-- Error messages that appear but aren't associated -->
            <div id="floating-errors" style="color: red; display: none;">
                Multiple errors occurred but we won't tell you which fields or how to fix them!
            </div>
            
            <h3>Timeout Issues and Session Management</h3>
            <div class="test-note" style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 10px; margin: 10px 0;">
                <strong>‚ö†Ô∏è INTERACTION OPTIONAL:</strong> Button starts destructive 10-second countdown.
                <br><strong>State Changes:</strong> Countdown timer, no warnings, session expiry - use with caution
            </div>
            <p>Your session will expire in <span id="countdown">10</span> seconds with no warning...</p>
            <button type="button" onclick="startSilentTimeout()">Start Destructive Timeout</button>
            
            <h3>Inaccessible Drag and Drop</h3>
            <div id="drag-zone" style="border: 2px dashed #ccc; padding: 40px; text-align: center; margin: 20px 0;">
                <p>Drag your tax documents here to upload</p>
                <p style="font-size: 12px; color: #666;">(Only drag and drop - no alternative method)</p>
                <p style="color: red; font-size: 10px;">No keyboard support, no screen reader support</p>
            </div>
            
            <h3>Color-Only Error Communication</h3>
            <div class="test-note" style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 10px; margin: 10px 0;" role="region" aria-labelledby="color-only-heading">
                <h4 id="color-only-heading" style="margin: 0 0 8px 0;">‚ö†Ô∏è INTERACTION REQUIRED FOR DEFECT DETECTION</h4>
                <p style="margin: 0;"><strong>State Changes:</strong> Form submission shows error indication only through red borders</p>
                <p style="margin: 4px 0 0 0;"><strong>Purpose:</strong> Test color-only error communication - submit to see accessibility violation</p>
            </div>
            <form onsubmit="return colorOnlyErrors()">
                <input type="email" id="color-email" placeholder="Email" style="border: 2px solid red;" />
                <input type="password" id="color-password" placeholder="Password" style="border: 2px solid red;" />
                <input type="tel" id="color-phone" placeholder="Phone" style="border: 2px solid red;" />
                <p style="color: red;">Please fix the red fields above (no other indication provided)</p>
                <button type="submit">Submit</button>
            </form>
            
            <h3>Auto-Refresh and Motion Issues</h3>
            <div id="auto-refresh-content">
                <p>This content auto-refreshes every 5 seconds without warning</p>
                <p>Current time: <span id="auto-time"></span></p>
            </div>
            
            <h3>Complex Widget Without Accessibility</h3>
            <div class="fake-datepicker" onclick="toggleCalendar()" style="border: 1px solid #ccc; padding: 10px; cursor: pointer; width: 200px;">
                <span id="selected-date">Select a date</span>
                <div id="calendar" style="display: none; position: absolute; background: white; border: 1px solid #ccc; z-index: 1000;">
                    <!-- Fake calendar grid -->
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; padding: 10px;">
                        <div onclick="selectDate('2024-01-01')" style="padding: 5px; text-align: center; cursor: pointer;">1</div>
                        <div onclick="selectDate('2024-01-02')" style="padding: 5px; text-align: center; cursor: pointer;">2</div>
                        <div onclick="selectDate('2024-01-03')" style="padding: 5px; text-align: center; cursor: pointer;">3</div>
                        <!-- More dates would be here -->
                    </div>
                </div>
            </div>
            
            <h3>Loading States Without Communication</h3>
            <div class="test-note" style="background: #fff3e0; border-left: 4px solid #ff9800; padding: 10px; margin: 10px 0;" role="region" aria-labelledby="loading-test-heading">
                <h4 id="loading-test-heading" style="margin: 0 0 8px 0;">‚ö†Ô∏è INTERACTION REQUIRED FOR DEFECT DETECTION</h4>
                <p style="margin: 0;"><strong>State Changes:</strong> Button changes but no loading announcements, no progress indication</p>
                <p style="margin: 4px 0 0 0;"><strong>Purpose:</strong> Test missing live region updates and poor loading state communication</p>
            </div>
            <button type="button" onclick="badLoading()" id="bad-load-btn">
                Process Application Silently
            </button>
            <div id="bad-loading-area"></div>
            
            <h3>Form with Every Possible Accessibility Violation</h3>
            <form method="post" action="#" onsubmit="return ultimateBadForm()">
                <!-- Missing fieldset, no legend -->
                <div>Personal Information</div>
                
                <!-- No labels, wrong input types, no validation -->
                <input type="text" placeholder="SSN" autocomplete="off" />
                <input type="text" placeholder="Birth Date" />
                <input type="text" placeholder="Income" />
                
                <!-- Radio buttons with no grouping -->
                <div>Marital Status:</div>
                <input type="radio" /> Single
                <input type="radio" /> Married
                <input type="radio" /> Other
                
                <!-- Checkboxes with conflicting names -->
                <div>Services (check all that apply):</div>
                <input type="checkbox" name="service1" /> Health Insurance
                <input type="checkbox" name="service1" /> Life Insurance
                <input type="checkbox" name="service1" /> Disability
                
                <!-- Custom elements that aren't accessible -->
                <div class="fake-select" onclick="showOptions()" style="border: 1px solid #ccc; padding: 5px;">
                    Select your state
                    <div class="options" style="display: none;">
                        <div onclick="pickState('CA')">California</div>
                        <div onclick="pickState('TX')">Texas</div>
                    </div>
                </div>
                
                <!-- Submit button that doesn't work -->
                <div onclick="fakeSubmit()" style="background: #ccc; padding: 10px; text-align: center; cursor: pointer;">
                    Submit (Not Actually a Button)
                </div>
            </form>
        </section>
        
        <script>
            let currentSlide = 1;
            let timeoutId;
            
            function validateAccessibleForm(event) {
                event.preventDefault();
                
                const errors = [];
                const errorSummary = document.getElementById('error-summary');
                const errorList = document.getElementById('error-list');
                
                // Clear previous errors
                errorList.innerHTML = '';
                document.querySelectorAll('[role="alert"]').forEach(el => {
                    if (el.id !== 'error-summary') el.style.display = 'none';
                });
                
                // Validate SSN
                const ssn = document.getElementById('ssn');
                if (!ssn.value.match(/^[0-9]{3}-[0-9]{2}-[0-9]{4}$/)) {
                    errors.push({element: ssn, message: 'Social Security Number must be in XXX-XX-XXXX format'});
                    document.getElementById('ssn-error').textContent = 'Invalid format. Use XXX-XX-XXXX';
                    document.getElementById('ssn-error').style.display = 'block';
                    ssn.setAttribute('aria-invalid', 'true');
                }
                
                // Validate Income
                const income = document.getElementById('income');
                if (!income.value || income.value < 0) {
                    errors.push({element: income, message: 'Annual income is required and must be positive'});
                    document.getElementById('income-error').textContent = 'Please enter a valid income amount';
                    document.getElementById('income-error').style.display = 'block';
                    income.setAttribute('aria-invalid', 'true');
                }
                
                // Show error summary if errors exist
                if (errors.length > 0) {
                    errors.forEach(error => {
                        const li = document.createElement('li');
                        const link = document.createElement('a');
                        link.href = '#' + error.element.id;
                        link.textContent = error.message;
                        link.onclick = () => error.element.focus();
                        li.appendChild(link);
                        errorList.appendChild(li);
                    });
                    errorSummary.style.display = 'block';
                    errorSummary.focus();
                } else {
                    alert('Form submitted successfully!');
                }
            }
            
            function simulateLoading() {
                const btn = document.getElementById('load-btn');
                const status = document.getElementById('loading-status');
                
                btn.disabled = true;
                btn.innerHTML = 'Processing... <span aria-hidden="true">‚è≥</span>';
                status.textContent = 'Processing your application, please wait...';
                
                setTimeout(() => {
                    btn.disabled = false;
                    btn.textContent = 'Process Application';
                    status.textContent = 'Application processed successfully!';
                }, 3000);
            }
            
            // Bad functions for defective examples
            function prevSlide() {
                const slides = document.querySelectorAll('.slide');
                slides[currentSlide].style.display = 'none';
                currentSlide = currentSlide > 0 ? currentSlide - 1 : slides.length - 1;
                slides[currentSlide].style.display = 'block';
                // No announcements, no keyboard support
            }
            
            function nextSlide() {
                const slides = document.querySelectorAll('.slide');
                slides[currentSlide].style.display = 'none';
                currentSlide = currentSlide < slides.length - 1 ? currentSlide + 1 : 0;
                slides[currentSlide].style.display = 'block';
                // No announcements, no keyboard support
            }
            
            function goToSlide(index) {
                const slides = document.querySelectorAll('.slide');
                slides[currentSlide].style.display = 'none';
                currentSlide = index;
                slides[currentSlide].style.display = 'block';
                // No announcements, no state management
            }
            
            function disastrousValidation() {
                // Shows errors but doesn't associate them with fields
                document.getElementById('floating-errors').style.display = 'block';
                return false;
            }
            
            function badSubmit() {
                alert('Form submitted with no validation! Data may be invalid.');
            }
            
            function startSilentTimeout() {
                let count = 10;
                const countdown = document.getElementById('countdown');
                timeoutId = setInterval(() => {
                    count--;
                    countdown.textContent = count;
                    if (count <= 0) {
                        clearInterval(timeoutId);
                        alert('Session expired silently! All your work has been lost with no warning.');
                        // In a real app, this would redirect or clear the form
                        location.reload();
                    }
                }, 1000);
            }
            
            function colorOnlyErrors() {
                alert('Errors indicated only by red borders - no text explanation!');
                return false;
            }
            
            function toggleCalendar() {
                const calendar = document.getElementById('calendar');
                calendar.style.display = calendar.style.display === 'none' ? 'block' : 'none';
                // No ARIA, no keyboard support, no announcements
            }
            
            function selectDate(date) {
                document.getElementById('selected-date').textContent = date;
                document.getElementById('calendar').style.display = 'none';
                // No announcements, no proper value setting
            }
            
            function badLoading() {
                const btn = document.getElementById('bad-load-btn');
                const area = document.getElementById('bad-loading-area');
                
                btn.disabled = true;
                btn.textContent = 'Processing...';
                
                // No status announcements, no progress indication
                setTimeout(() => {
                    btn.disabled = false;
                    btn.textContent = 'Process Application Silently';
                    area.innerHTML = '<p style="color: green;">Done (but you were never told it was processing)</p>';
                }, 2000);
            }
            
            function showOptions() {
                const options = document.querySelector('.options');
                options.style.display = options.style.display === 'none' ? 'block' : 'none';
            }
            
            function pickState(state) {
                alert('Selected: ' + state + ' (but no proper form value set)');
                document.querySelector('.options').style.display = 'none';
            }
            
            function fakeSubmit() {
                alert('This looks like a submit button but has no form functionality!');
            }
            
            function ultimateBadForm() {
                alert('This form has every possible accessibility violation!');
                return false;
            }
            
            // Auto-refresh example (bad)
            setInterval(() => {
                document.getElementById('auto-time').textContent = new Date().toLocaleTimeString();
            }, 5000);
        </script>
    </div>
</body>
</html>
